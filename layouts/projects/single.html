{{- define "main" }}
  {{- $project := .Param "projectUrl" -}}
  {{- $repo := .Param "repositoryUrl" -}}
  <div class="container">
    <main id="main">
      {{- if eq hugo.Environment "development" -}}
        <a 
          href="vscode://file/{{- os.Getenv "PWD" }}/content/{{- .File.Path -}}"
          class="edit-page-button"
        >
          Edit Page
        </a>
      {{- end -}}
      <article>
        <header>
          <div class="content-area">
            <h1 class="page-project__title">{{- .Name -}}</h1>
          </div>

          {{- if (or $project $repo) -}}
            <ul class="project-link__list">
              {{- if $project -}}
                <a href="{{ $project }}" class="project-link">
                  <i class="fas fa-globe"></i>
                  Visit project
                </a>
              {{- end -}}
              {{- if $repo -}}
                <a href="{{ $repo }}" class="project-link">
                  <i class="fab fa-github"></i>
                  Visit GitHub repo
                </a>
              {{- end -}}
            </ul>
          {{- end -}}
            
          {{- partial "project-screenshot" . -}}

          <div>
            <h2 class="sr-only">
              Stack
            </h2>

            <ul class="technology-pill__wrapper">
              {{- range .Param "technologies" -}}
                {{- $technology := . -}}
                {{- if (reflect.IsMap $technology) -}}
                  {{- $technology = $technology.featured -}}
                {{- end -}}
                <li class="technology-pill">
                  {{- $technology -}}
                </li>
              {{- end -}}
            </ul>
          </div>
        </header>

        <div class="content-area">
          {{- .Content -}}
        </div>

        {{- if $project -}}
          <div class="button__wrapper text-center">
            <a href="{{ $project }}" class="button">Visit {{ .Name }}</a>
          </div>
        {{- else if $repo -}}
          <div class="button__wrapper text-center">
            <a href="{{ $repo }}" class="button">Visit {{ .Name }} Repo</a>
          </div>
        {{- end -}}

        <aside class="back-link">
          <a href="/projects/"><span aria-hidden="true">&#8592; </span>Back to projects</a>
        </aside>
      </main>
    </article>
  </div>
{{- end -}}
